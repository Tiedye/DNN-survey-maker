<div class="card">
  <div class="card-header handle d-flex justify-content-between" style="cursor: move">
    <div style="pointer-events: none;"><i class="fa fa-arrows"></i></div>
    <div><button class="btn btn-warning btn-sm" (click)="deleted.emit(true)"><i class="fa fa-minus"></i></button></div>
  </div>
  <div class="card-block">

    <div class="form-group row">
      <label class="col-md-2 col-form-label">Question Text:</label>
      <div class="col-md-10"><input type="text" class="form-control" [(ngModel)]="question.question"></div>
    </div>
    <div class="form-group row">
      <label class="col-md-2 col-form-label">Question ID:</label>
      <div class="col-md-10"><input type="text" class="form-control" [(ngModel)]="question.id"></div>
    </div>


    <ng-template [ngIf]="question.type === 'choice'">
      <div class="row">
        <div class="col">Name</div>
        <div class="col col-md-4">Value</div>
        <div class="col col-auto text-right">
          <button class="btn btn-sm null-btn"><i class="fa fa-circle-o"></i></button>
        </div>
      </div>
      <div class="form-group row align-items-center" *ngFor="let choice of question.choices; let i=index">
        <div class="col"><input type="text" class="form-control" [(ngModel)]="choice.name"></div>
        <div class="col col-md-4"><input type="text" class="form-control" [(ngModel)]="choice.value"></div>
        <div class="col col-auto text-right">
          <button class="btn btn-sm" (click)="question.choices.splice(i, 1)"><i class="fa fa-minus"></i></button>
        </div>
      </div>
      <div class="row">
        <div class="col text-right">
          <button class="btn btn-sm btn-success" (click)="question.choices.push({name:'', value:''})">
            <i class="fa fa-plus"></i>
          </button>
        </div>
      </div>
    </ng-template>

    <ng-template [ngIf]="question.type === 'text'">

    </ng-template>
    
    <ng-template [ngIf]="question.type === 'number'">
      <div class="form-group row">
        <label class="col-md-2 col-form-label">Minumum:</label>
        <div class="col-md-10"><input type="number" class="form-control" [(ngModel)]="question.min"></div>
      </div>
      <div class="form-group row">
        <label class="col-md-2 col-form-label">Maximum:</label>
        <div class="col-md-10"><input type="number" class="form-control" [(ngModel)]="question.max"></div>
      </div>
    </ng-template>
    
    <ng-template [ngIf]="question.type === 'date'">

    </ng-template>

    <ng-template [ngIf]="question.condition === null">
      <div class="row">
        <div class="col">
          <button class="btn btn-default" (click)="addCondition()">Add Condition</button>
        </div>
      </div>
    </ng-template>
    <ng-template [ngIf]="question.condition !== null">
      <div class="form-group row">
        <label class="col-md-2 col-form-label">Question ID:</label>
        <div class="col-md-10"><input type="text" class="form-control" [(ngModel)]="question.condition.questionId"></div>
      </div>
      <div class="form-group row">
        <div class="col">
        <label class="custom-control custom-radio">
          <input type="radio" [attr.name]="question.id+'cond'" class="custom-control-input" value="eq" [(ngModel)]="question.condition.comparator">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">=</span>
        </label>
        <label class="custom-control custom-radio">
          <input type="radio" [attr.name]="question.id+'cond'" class="custom-control-input" value="ne" [(ngModel)]="question.condition.comparator">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">&ne;</span>
        </label>
        <label class="custom-control custom-radio">
          <input type="radio" [attr.name]="question.id+'cond'" class="custom-control-input" value="lt" [(ngModel)]="question.condition.comparator">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">&lt;</span>
        </label>
        <label class="custom-control custom-radio">
          <input type="radio" [attr.name]="question.id+'cond'" class="custom-control-input" value="gt" [(ngModel)]="question.condition.comparator">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">&gt;</span>
        </label>
        <label class="custom-control custom-radio">
          <input type="radio" [attr.name]="question.id+'cond'" class="custom-control-input" value="lte" [(ngModel)]="question.condition.comparator">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">&le;</span>
        </label>
        <label class="custom-control custom-radio">
          <input type="radio" [attr.name]="question.id+'cond'" class="custom-control-input" value="gte" [(ngModel)]="question.condition.comparator">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">&ge;</span>
        </label>
        <label class="custom-control custom-radio">
          <input type="radio" [attr.name]="question.id+'cond'" class="custom-control-input" value="range" [(ngModel)]="question.condition.comparator">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">range</span>
        </label>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-md-2 col-form-label">Condition:</label>
        <ng-template [ngIf]="question.condition.comparator === 'range'">
          <div class="col-md-5"><input placeholder="min" type="text" class="form-control" [(ngModel)]="question.condition.compareMin"></div>
          <div class="col-md-5"><input placeholder="max" type="text" class="form-control" [(ngModel)]="question.condition.compareMax"></div>
        </ng-template>
        <ng-template  [ngIf]="question.condition.comparator !== 'range'">
          <div class="col-md-10"><input type="text" class="form-control" [(ngModel)]="question.condition.compare"></div>
        </ng-template>
      </div>
      <div class="row">
        <div class="col">
          <button class="btn btn-danger" (click)="removeCondition()">Remove Condition</button>
        </div>
      </div>
    </ng-template>

  </div>
</div>
